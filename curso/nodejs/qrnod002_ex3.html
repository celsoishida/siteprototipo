<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livro Node.js - QRNOD002 - Exercício 3 - MySQL</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../google-tag.js"></script>
</head>
<body>
    <div id="header-container"></div>
    <main>
        <section>
            <h1>Exercício 3: Conectando ao Banco de Dados</h1>
            <ul>
                <li>
                    <b>Descrição:</b> Crie um arquivo <b>app.js</b> e escreva o código para estabelecer uma conexão com o banco de dados <b>api_nodejs_db</b> usando o pacote <b>mysql2</b>. A conexão deve ser configurada para usar Promises. Exiba uma mensagem no console se a conexão for bem-sucedida ou um erro, caso contrário.
                </li>
                <li>
                    <b>Conteúdo Teórico:</b>
                    <ul>
                        <li>O <b>mysql2</b> permite criar um pool de conexões (recomendado para aplicações em produção) ou uma única conexão. Para nossos exercícios iniciais, uma única conexão é suficiente para entender o conceito. Para cada requisição você vai criar uma conexão e quando acabar, você vai destruir esta conexão.</li>
                        <li><b>require('mysql2/promise')</b>: Importa a versão do mysql2 que utiliza Promises, o que simplifica o tratamento de operações assíncronas.</li>
                        <li><b>mysql.createConnection()</b>: Função para criar uma única conexão com o banco de dados. Recebe um objeto com as configurações de conexão (host, user, password, database).</li>
                        <li><b>connection.connect()</b>: Inicia a conexão com o banco de dados.</li>
                        <li><b>try...catch</b>: Bloco para lidar com erros em operações assíncronas.</li>
                        <li><b>async/await</b>: Recursos do JavaScript que tornam o código assíncrono mais fácil de ler e escrever.</li>
                    </ul>
                </li>
            </ul>
            <pre>
<b>Exemplo de Código:</b>
<code>
// app.js
const mysql = require('mysql2/promise');
async function connectToDatabase() {
let connection;
try {
connection = await mysql.createConnection({
host: 'localhost', // Ou o IP/nome do host do seu MySQL
user: 'root', // Seu usuário do MySQL
password: '', // Sua senha do MySQL
database: 'api_nodejs_db'
});
console.log('Conexão bem-sucedida com o banco de dados!');
} catch (error) {
console.error('Erro ao conectar ao banco de dados:', error);
} finally {
if (connection) {
await connection.end(); // Fechar a conexão
}
}
}
connectToDatabase();
</code>
<b>Dica:</b>
Certifique-se de que seu servidor MySQL está rodando antes de executar este código. Verifique e ajuste as credenciais (user e password) conforme sua configuração.
<b>Sugestão de Extensão:</b>
Tente criar um arquivo de configuração separado (<b>config.js</b>) para armazenar as credenciais do banco de dados e importá-lo no <b>app.js</b>.
</pre>
        </section>
    </main>
    <div id="footer-container"></div>
    <script src="cabecalho.js"></script>
    <script src="rodape.js"></script>
</body>
</html>
