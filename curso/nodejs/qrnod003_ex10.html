<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livro Node.js - QRNOD003 - Exercício 10</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../google-tag.js"></script>
</head>
<body>
    <div id="header-container"></div>
    <main>
        <section>
            <h1>Exercício 10: Tratamento de Erros</h1>
            <ul>
                <li>Descrição: Aprimore todos os exercícios anteriores para incluir um tratamento de erros mais robusto, utilizando um middleware de erros global no Express. Além disso, garanta que mensagens de erro claras sejam retornadas ao cliente, mas sem expor detalhes internos do servidor em produção.</li>
                <li>Conceitos Teóricos:
                    <ul>
                        <li>Middleware de Erros no Express: Uma função middleware especial que recebe quatro argumentos (<code>err, req, res, next</code>). Ele é executado quando <code>next(err)</code> é chamado.</li>
                        <li>Captura de Exceções (<code>try...catch</code>): Essencial para lidar com erros assíncronos (como operações de banco de dados).</li>
                        <li>Códigos de Status HTTP para Erros: Usar 400 Bad Request, 404 Not Found, 500 Internal Server Error, etc., para indicar a natureza do problema.</li>
                        <li>Segurança da Mensagem de Erro: Em produção, evite mensagens de erro que revelem detalhes da pilha de chamadas ou da estrutura interna do servidor, pois isso pode ser um risco de segurança.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <pre>
<strong>Dicas:</strong>
Defina a variável de ambiente NODE_ENV=production para testar o comportamento em produção.
Crie classes de erro personalizadas (ex: class NotFoundError extends Error) para erros específicos.
<strong>Sugestão de Extensão:</strong>
Implemente um sistema de log mais avançado usando bibliotecas como Winston ou Morgan para registrar os erros.
</pre>
            <br>
            <div class="centered-nav-btn">
                <button class="nav-btn prev-btn">
                  <img src="../../images/prev.png" title="Exercício Anterior" class="nav-img">
                </button>
                <button class="nav-btn next-btn">
                  <img src="../../images/next.png" title="Próximo Exercício" class="nav-img">
                </button>
            </div>
        </section>
        <div style="margin-top: 24px; text-align: center;">
          <button id="btn-resposta" class="btn-resposta">Dica e Resposta</button>
          <div id="resposta-content" style="display:none;">
            <div style="display: flex; justify-content: center; gap: 32px;">
              <div>
                <strong>Dica:</strong>
                <pre>
// Use next(error) para encaminhar erros ao middleware global.
// Em produção, nunca envie stack trace para o cliente.
                </pre>
              </div>
              <div style="display: flex; flex-direction: column; justify-content: center;">
                <a href="respostas/ver.html?file=exenod3_10" style="margin-bottom: 8px;" target="_blank">Completo</a>
                <a href="respostas/ver.html?file=exenod3_10b" target="_blank">Avançado</a>
              </div>
            </div>
          </div>
        </div>
        <br />
        <div id="exercise-menu"></div>
    </main>
    <div id="footer-container"></div>
    <script>
    document.querySelector('.prev-btn').addEventListener('click', function() {
      window.location.href = 'qrnod003_ex9.html';
    });
    document.querySelector('.next-btn').addEventListener('click', function() {
      window.location.href = 'qrnod003.html';
    });
    fetch('qrnod003_menu.html')
      .then(res => res.text())
      .then(html => { document.getElementById('exercise-menu').innerHTML = html; });
    document.getElementById('btn-resposta').addEventListener('click', function() {
      document.getElementById('resposta-content').style.display = 'block';
    });
    </script>
    <script src="../../scripts/copyToClipboard.js"></script>
    <script src="grupo3dot.js"></script>
    <script src="cabecalho.js"></script>
    <script src="rodape.js"></script>
</body>
</html>
