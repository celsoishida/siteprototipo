<!DOCTYPE html>
<html>
<head>
	<title>Teste Mapa</title>
	<meta charset="utf-8" />
	<script src="leaflet/leaflet-src.js"></script>
    <link href="leaflet/leaflet.css" rel="stylesheet">

    <script src="leaflet/Leaflet.draw.js"></script>
    <script src="leaflet/Leaflet.Draw.Event.js"></script>
    <link href="leaflet/leaflet.draw.css" rel="stylesheet">

    <script src="leaflet/Toolbar.js"></script>
    <script src="leaflet/Tooltip.js"></script>

    <script src="leaflet/ext/GeometryUtil.js"></script>
    <script src="leaflet/ext/LatLngUtil.js"></script>
    <script src="leaflet/ext/LineUtil.Intersect.js"></script>
    <script src="leaflet/ext/Polygon.Intersect.js"></script>
    <script src="leaflet/ext/Polyline.Intersect.js"></script>
    <script src="leaflet/ext/TouchEvents.js"></script>

    <script src="leaflet/draw/DrawToolbar.js"></script>
    <script src="leaflet/draw/handler/Draw.Feature.js"></script>
    <script src="leaflet/draw/handler/Draw.SimpleShape.js"></script>
    <script src="leaflet/draw/handler/Draw.Polyline.js"></script>
    <script src="leaflet/draw/handler/Draw.Marker.js"></script>
    <script src="leaflet/draw/handler/Draw.Circle.js"></script>
    <script src="leaflet/draw/handler/Draw.CircleMarker.js"></script>
    <script src="leaflet/draw/handler/Draw.Polygon.js"></script>
    <script src="leaflet/draw/handler/Draw.Rectangle.js"></script>


    <script src="leaflet/edit/EditToolbar.js"></script>
    <script src="leaflet/edit/handler/EditToolbar.Edit.js"></script>
    <script src="leaflet/edit/handler/EditToolbar.Delete.js"></script>

    <script src="leaflet/Control.Draw.js"></script>

    <script src="leaflet/edit/handler/Edit.Poly.js"></script>
    <script src="leaflet/edit/handler/Edit.SimpleShape.js"></script>
    <script src="leaflet/edit/handler/Edit.Rectangle.js"></script>
    <script src="leaflet/edit/handler/Edit.Marker.js"></script>
    <script src="leaflet/edit/handler/Edit.CircleMarker.js"></script>
    <script src="leaflet/edit/handler/Edit.Circle.js"></script>
</head>
<body>

<div id="map" style="width: 100%; height: 620PX;"></div>

<script>
  
// criar e mostrar o mapa
	var map = ('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',+
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox.streets'
            osm = L.tileLayer(map, {maxZoom: 18, attribution: osmAttrib})),
			// latitude e longitude
            map = new L.Map('map', {drawControl:true, center: new L.LatLng(-25.444906, -49.2383), zoom: 15}),
            drawnItems = L.featureGroup().addTo(map)})
        }, {'drawlayer':drawnItems}, { position: 'topright'}).addTo(map);

        map.addControl(new L.Control.Draw({
            edit: {
                featureGroup: drawnItems,
                poly : {
                    allowIntersection : true
                }
            },
            draw: {
                polygon : {
                    allowIntersection: 
                }
            }
				save: function () {
		var editedLayers = new L.LayerGroup();
		this._featureGroup.eachLayer(function (layer) {
			if (layer.edited) {
				editedLayers.addLayer(layer);
				layer.edited = false;
			}
		});
		this._map.fire(L.Draw.Event.EDITED, {layers: editedLayers});
	},

	backupLayer: function (layer) {
		var id = L.Util.stamp(layer);

		if (!this._uneditedLayerProps[id]) {
			// Polyline, Polygon or Rectangle
			if (layer instanceof L.Polyline || layer instanceof L.Polygon || layer instanceof L.Rectangle) {
				this._uneditedLayerProps[id] = {
					latlngs: L.LatLngUtil.cloneLatLngs(layer.getLatLngs())
				};
			} else if (layer instanceof L.Circle) {
				this._uneditedLayerProps[id] = {
					latlng: L.LatLngUtil.cloneLatLng(layer.getLatLng()),
					radius: layer.getRadius()
				};
			} else if (layer instanceof L.Marker || layer instanceof L.CircleMarker) { // Marker
				this._uneditedLayerProps[id] = {
					latlng: L.LatLngUtil.cloneLatLng(layer.getLatLng())
				};
			}
		}
	};
		this._map.fire(L.Draw.Event.EDITED, {layers: editedLayers});
        }));

        // Truncate value based on number of decimals
        var _round = function(num, len) {
            return Math.round(num*(Math.pow(10, len)))/(Math.pow(10, len));
        };
        // Helper method to format LatLng object (x.xxxxxx, y.yyyyyy)
        var strLatLng = function(latlng) {
            return "("+_round(latlng.lat, 6)+", "+_round(latlng.lng, 6)+")";
        };

        // Generate popup content based on layer type
        // - Returns HTML string, or null if unknown object
        var getPopupContent = function(layer) {
            // Marker - add lat/long
            if (layer instanceof L.Marker || layer instanceof L.CircleMarker) {
                return strLatLng(layer.getLatLng());
            // Circle - lat/long, radius
            } else if (layer instanceof L.Circle) {
                var center = layer.getLatLng(),
                    radius = layer.getRadius();
                return "Center: "+strLatLng(center)+"<br />"
                      +"Radius: "+_round(radius, 2)+" m";
            // Rectangle/Polygon - area
            } else if (layer instanceof L.Polygon) {
                var latlngs = layer._defaultShape ? layer._defaultShape() : layer.getLatLngs(),
                    area = L.GeometryUtil.geodesicArea(latlngs);
                return "Area: "+L.GeometryUtil.readableArea(area, true);
           
        };


        })	
</script>



</body>
</html>
